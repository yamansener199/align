﻿@{
    Layout = null; // This line ensures that the layout is not applied to this specific view
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="~/css/stok-yonetim.css">



    <title>Stok Yönetimi</title>

</head>
<body>

    <div class="top-bar">
        <div class="user-info">
            <span class="material-icons user-icon">account_circle</span>
            <span>Super Admin</span>
            <div id="clock" class="clock" style="margin-left: 10px;"></div>
            <button class="logout-btn" style="margin-left: 90px;">Cıkış</button>

        </div>
    </div>

    <br>
    <div class="navbar">
        <a href="/Home/Index"><span class="material-icons">home</span>Dashboard</a>
        <a href="/Home/Orders"><span class="material-icons">shopping_cart</span>Ürün ve Sipariş Yönetimi</a>
        <a href="/Home/Stocks"><span class="material-icons">storage</span>Stok Yönetimi</a>
        <a href="/Home/Warehouse"><span class="material-icons">warehouse</span>Depo Yönetimi</a>
        <a href="/Home/Report"><span class="material-icons">bar_chart</span>Sipariş Raporları</a>
        <a href="/Home/Settings"><span class="material-icons">manage_accounts</span>Kullanıcı Yönetimi</a>
    </div>

    <div class="container">
        <h1>Stok Yönetimi</h1>

        <button id="newStockBtn">Yeni Ürün Ekle</button>
        <button id="downloadPdfBtn">Envanter Raporu İndir</button>

        <table id="stockTable">
            <thead>
                <tr>
                    <th>Ürün Adı</th>
                    <th>Stok Kodu</th>
                    <th>Stok Adeti</th>
                    <th>Koli Adeti</th>
                    <th>İşlemler</th>
                </tr>
            </thead>
            <tbody>
                <!-- Stoklar buraya dinamik olarak eklenecek -->
            </tbody>
        </table>
    </div>

    <div class="modal" id="stockModal">
        <div class="modal-content">
            <span class="close" id="closeModal">&times;</span>
            <!-- Stok formu buraya gelecek -->

        </div>
    </div>


</body>
</html>







<script>
    function updateClock() {
        var now = new Date();
        var hours = now.getHours().toString().padStart(2, '0');
        var minutes = now.getMinutes().toString().padStart(2, '0');
        var seconds = now.getSeconds().toString().padStart(2, '0');
        var dateStr = now.toLocaleDateString('tr-TR');
        var timeStr = hours + ':' + minutes + ':' + seconds;
        document.getElementById('clock').innerText = dateStr + ' ' + timeStr;
    }

    setInterval(updateClock, 1000);
</script>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const stockTable = document.getElementById('stockTable');
        const newStockBtn = document.getElementById('newStockBtn');
        const stockModal = document.getElementById('stockModal');
        const closeModalBtn = document.getElementById('closeModal');

        newStockBtn.addEventListener('click', openModal);
        closeModalBtn.addEventListener('click', closeModal);

        // Örnek stok verileri
        const stocks = [
            { productName: 'Ürün 1', stockCode: 'ABC123', stockAmount: 100, boxAmount: 10 },
            { productName: 'Ürün 2', stockCode: 'XYZ789', stockAmount: 50, boxAmount: 5 },
            // Daha fazla stok ekleyebilirsiniz
        ];

        // Stokları tabloya ekle
        displayStocks();

        function displayStocks() {
            const tbody = stockTable.querySelector('tbody');
            tbody.innerHTML = '';

            stocks.forEach((stock, index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${stock.productName}</td>
                    <td>${stock.stockCode}</td>
                    <td>${stock.stockAmount}</td>
                    <td>${stock.boxAmount}</td>
                    <td>
                        <button onclick="viewStock(${index})">Görüntüle</button>
                        <button onclick="editStock(${index})">Düzenle</button>
                        <button onclick="deleteStock(${index})">Sil</button>
                    </td>
                `;

                tbody.appendChild(row);
            });
        }

        function openModal() {
            // Stok ekleme formunu burada göster
            const modalContent = stockModal.querySelector('.modal-content');
            modalContent.innerHTML = `
                <span class="close" id="closeModal">&times;</span>
                <form id="stockForm">
                    <label for="productName">Ürün Adı:</label>
                    <input type="text" id="productName" required><br>

                    <label for="stockCode">Stok Kodu:</label>
                    <input type="text" id="stockCode" required><br>

                    <label for="stockAmount">Stok Adeti:</label>
                    <input type="number" id="stockAmount" required><br>

                    <label for="boxAmount">Koli Adeti:</label>
                    <input type="number" id="boxAmount" required><br>

                    <button type="button" onclick="saveStock()">Kaydet</button>
                </form>
            `;

            stockModal.style.display = 'flex';
            closeModalBtn.addEventListener('click', closeModal);
        }

        function closeModal() {
            stockModal.style.display = 'none';
        }

        window.onclick = function (event) {
            if (event.target === stockModal) {
                closeModal();
            }
        };

        window.viewStock = function (index) {
            // Görüntüleme işlemi burada yapılabilir
            alert(`Ürün Adı: ${stocks[index].productName}\nStok Kodu: ${stocks[index].stockCode}\nStok Adeti: ${stocks[index].stockAmount}\nKoli Adeti: ${stocks[index].boxAmount}`);
        };

        window.editStock = function (index) {
            // Düzenleme işlemi burada yapılabilir
            const selectedStock = stocks[index];
            const stockForm = document.getElementById('stockForm');
            const productNameInput = document.getElementById('productName');
            const stockCodeInput = document.getElementById('stockCode');
            const stockAmountInput = document.getElementById('stockAmount');
            const boxAmountInput = document.getElementById('boxAmount');

            productNameInput.value = selectedStock.productName;
            stockCodeInput.value = selectedStock.stockCode;
            stockAmountInput.value = selectedStock.stockAmount;
            boxAmountInput.value = selectedStock.boxAmount;

            // Düzenleme formunu göster
            openModal();

            // Düzenleme işlemini kaydetme
            document.getElementById('stockForm').addEventListener('submit', function (event) {
                event.preventDefault();
                selectedStock.productName = productNameInput.value;
                selectedStock.stockCode = stockCodeInput.value;
                selectedStock.stockAmount = stockAmountInput.value;
                selectedStock.boxAmount = boxAmountInput.value;

                // Tabloyu güncelle
                displayStocks();
                closeModal();
            });
        };

        window.deleteStock = function (index) {
            // Silme işlemi burada yapılabilir
            if (confirm('Bu stoku silmek istediğinizden emin misiniz?')) {
                stocks.splice(index, 1);
                // Tabloyu güncelle
                displayStocks();
            }
        };

        window.saveStock = function () {
            // Yeni stok eklemek için burada işlemler yapılabilir
            const stockForm = document.getElementById('stockForm');
            const productNameInput = document.getElementById('productName');
            const stockCodeInput = document.getElementById('stockCode');
            const stockAmountInput = document.getElementById('stockAmount');
            const boxAmountInput = document.getElementById('boxAmount');

            const newStock = {
                productName: productNameInput.value,
                stockCode: stockCodeInput.value,
                stockAmount: stockAmountInput.value,
                boxAmount: boxAmountInput.value
            };

            stocks.push(newStock);

            // Tabloyu güncelle
            displayStocks();
            closeModal();
        };
    });


</script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        // ... Diğer kodlar ...

        const downloadPdfBtn = document.getElementById('downloadPdfBtn');
        downloadPdfBtn.addEventListener('click', downloadStocksPdf);

        // ... Diğer kodlar ...

        function downloadStocksPdf() {
            const pdf = new jsPDF();

            pdf.text('Stok Yönetimi', 20, 20);
            pdf.autoTable({
                head: [['Ürün Adı', 'Stok Kodu', 'Stok Adeti', 'Koli Adeti']],
                body: stocks.map(stock => [stock.productName, stock.stockCode, stock.stockAmount, stock.boxAmount]),
            });

            pdf.save('Stoklar.pdf');
        }
    });
</script>

